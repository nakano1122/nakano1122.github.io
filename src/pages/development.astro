---
import Layout from '../layouts/Layout.astro';
import Timeline from '../components/common/Timeline.astro';
import { loadDevelopmentExperience } from '../functions/dataLoader';
import TechLogo from '../components/common/TechLogo.astro';

const developmentExp = await loadDevelopmentExperience();

// 受賞歴を新しい順にソートしてTimelineアイテムに変換
const sortedAwards = [...developmentExp.awards].reverse();
const awardItems = sortedAwards.map((award) => ({
	title: award.event,
	subtitle: award.award,
	meta: award.date,
}));
---

<Layout title="Development - 中野暁登">
	<main class="development-page">
		<div class="container">
			<h1 class="page-title">Development</h1>

			<section class="content-section">
				<div class="content-card">
					<!-- 受賞歴 -->
					{awardItems.length > 0 && (
						<div class="awards-section">
							<h2>受賞歴</h2>
							<Timeline items={awardItems} markerColor="primary" />
						</div>
					)}

					<!-- Tech Stack -->
					{Object.keys(developmentExp.techStack).length > 0 && (
						<div class="tech-stack-section">
							<h2>Tech Stack</h2>
							{Object.entries(developmentExp.techStack).map(([category, techs]) => (
								<div class="tech-category">
									<h3 class="category-title">{category}</h3>
									<div class="tech-grid">
										{(techs as string[]).map((tech) => (
											<TechLogo tech={tech} showName={false} size="md" />
										))}
									</div>
								</div>
							))}
						</div>
					)}
				</div>
			</section>
		</div>
	</main>
</Layout>

<style>
	.development-page {
		padding: var(--spacing-5xl) 0;
	}

	.container {
		max-width: 800px;
		margin: 0 auto;
		padding: 0 var(--spacing-xl);
	}

	.page-title {
		font-size: var(--font-size-4xl);
		font-weight: var(--font-weight-bold);
		background: var(--gradient-primary);
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		text-align: center;
		margin-bottom: var(--spacing-5xl);
	}

	.content-card {
		background: var(--color-bg-card);
		border: 1px solid var(--color-border);
		border-radius: var(--radius-2xl);
		padding: var(--spacing-4xl);
		box-shadow: var(--shadow-md);
	}

	.awards-section {
		margin-bottom: var(--spacing-4xl);
	}

	.awards-section h2,
	.tech-stack-section h2 {
		font-size: var(--font-size-2xl);
		font-weight: var(--font-weight-bold);
		color: var(--color-text);
		margin-bottom: var(--spacing-2xl);
	}

	.tech-stack-section {
		padding-top: var(--spacing-4xl);
		border-top: 1px solid var(--color-border);
	}

	.tech-category {
		margin-bottom: var(--spacing-2xl);
	}

	.category-title {
		font-size: var(--font-size-lg);
		font-weight: var(--font-weight-semibold);
		color: var(--color-text-light);
		margin-bottom: var(--spacing-md);
		text-transform: capitalize;
	}

	.tech-grid {
		display: flex;
		flex-wrap: wrap;
		gap: var(--spacing-md);
	}

	@media (max-width: 768px) {
		.page-title {
			font-size: var(--font-size-3xl);
		}

		.content-card {
			padding: var(--spacing-2xl);
		}
	}
</style>
