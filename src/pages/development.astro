---
import Layout from '../layouts/Layout.astro';
import PageContainer from '../components/layout/PageContainer.astro';
import Timeline from '../components/common/Timeline.astro';
import { loadDevelopmentExperience } from '../functions/dataLoader';
import TechLogo from '../components/common/TechLogo.astro';
import { convertAwardsToTimeline } from '../utils/timelineHelpers';

const developmentExp = await loadDevelopmentExperience();

// 受賞歴を新しい順にソートしてTimelineアイテムに変換
const awardItems = convertAwardsToTimeline(developmentExp.awards);
---

<Layout title="Development - 中野暁登">
	<PageContainer title="Development" class="development-page-container">
		<section class="content-section">
				<div class="content-card">
					<!-- 受賞歴 -->
					{awardItems.length > 0 && (
						<div class="awards-section">
							<h2>受賞歴</h2>
							<Timeline items={awardItems} markerColor="primary" />
						</div>
					)}

					<!-- Tech Stack -->
					{Object.keys(developmentExp.techStack).length > 0 && (
						<div class="tech-stack-section">
							<h2>Tech Stack</h2>
							{Object.entries(developmentExp.techStack).map(([category, techs]) => (
								<div class="tech-category">
									<h3 class="category-title">{category}</h3>
									<div class="tech-grid">
										{(techs as string[]).map((tech) => (
											<TechLogo tech={tech} showName={false} size="md" />
										))}
									</div>
								</div>
							))}
						</div>
					)}
				</div>
		</section>
	</PageContainer>
</Layout>

<style>
	.development-page-container :global(.page-title) {
		text-align: center;
	}

	.content-card {
		background: var(--color-bg-card);
		border: 1px solid var(--color-border);
		border-radius: var(--radius-2xl);
		padding: var(--spacing-4xl);
		box-shadow: var(--shadow-md);
	}

	.awards-section {
		margin-bottom: var(--spacing-4xl);
	}

	.awards-section h2,
	.tech-stack-section h2 {
		font-size: var(--font-size-2xl);
		font-weight: var(--font-weight-bold);
		color: var(--color-text);
		margin-bottom: var(--spacing-2xl);
	}

	.tech-stack-section {
		padding-top: var(--spacing-4xl);
		border-top: 1px solid var(--color-border);
	}

	.tech-category {
		margin-bottom: var(--spacing-2xl);
	}

	.category-title {
		font-size: var(--font-size-lg);
		font-weight: var(--font-weight-semibold);
		color: var(--color-text-light);
		margin-bottom: var(--spacing-md);
		text-transform: capitalize;
	}

	.tech-grid {
		display: flex;
		flex-wrap: wrap;
		gap: var(--spacing-md);
	}

	@media (max-width: 768px) {
		.content-card {
			padding: var(--spacing-2xl);
		}
	}
</style>
