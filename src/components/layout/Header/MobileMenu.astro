---
export interface Props {
	currentPath?: string;
}

const { currentPath = '' } = Astro.props;
---

<div class="mobile-menu-container">
	<button class="hamburger-btn" aria-label="„É°„Éã„É•„Éº„ÇíÈñã„Åè">
		<span class="hamburger-line"></span>
		<span class="hamburger-line"></span>
		<span class="hamburger-line"></span>
	</button>
</div>

<div class="mobile-menu-overlay">
	<nav class="mobile-nav">
		<a href="/" class={`mobile-nav-item ${currentPath === '/' ? 'active' : ''}`}>
			<span class="mobile-nav-icon">üè†</span>
			<span class="mobile-nav-text">„Éõ„Éº„É†</span>
		</a>
		<a href="/development" class={`mobile-nav-item ${currentPath.startsWith('/development') ? 'active' : ''}`}>
			<span class="mobile-nav-icon">üíª</span>
			<span class="mobile-nav-text">ÈñãÁô∫ÁµåÈ®ì</span>
		</a>
		<a href="/research" class={`mobile-nav-item ${currentPath.startsWith('/research') ? 'active' : ''}`}>
			<span class="mobile-nav-icon">üìö</span>
			<span class="mobile-nav-text">Á†îÁ©∂Ê≠¥</span>
		</a>
		<a href="/internship" class={`mobile-nav-item ${currentPath.startsWith('/internship') ? 'active' : ''}`}>
			<span class="mobile-nav-icon">üíº</span>
			<span class="mobile-nav-text">„Ç§„É≥„Çø„Éº„É≥</span>
		</a>
	</nav>
</div>

<style>
	.mobile-menu-container {
		display: none;
	}

	.hamburger-btn {
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
		width: 40px;
		height: 40px;
		background: var(--color-bg-glass);
		border: 1px solid var(--color-border-light);
		border-radius: var(--radius-md);
		cursor: pointer;
		transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
		backdrop-filter: blur(10px);
		gap: 4px;
	}

	.hamburger-btn:hover {
		background: var(--color-bg-card);
		border-color: var(--color-primary-solid);
		transform: scale(1.05);
	}

	.hamburger-line {
		width: 20px;
		height: 2px;
		background: var(--color-text);
		border-radius: 1px;
		transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	}

	.hamburger-btn.active .hamburger-line:nth-child(1) {
		transform: rotate(45deg) translate(5px, 5px);
	}
	.hamburger-btn.active .hamburger-line:nth-child(2) {
		opacity: 0;
	}
	.hamburger-btn.active .hamburger-line:nth-child(3) {
		transform: rotate(-45deg) translate(7px, -6px);
	}

	.mobile-menu-overlay {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100vh;
		background: rgba(15, 15, 26, 0.95);
		backdrop-filter: blur(20px);
		z-index: 999;
		display: flex;
		align-items: center;
		justify-content: center;
		opacity: 0;
		visibility: hidden;
		transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
	}

	.mobile-menu-overlay.active {
		opacity: 1;
		visibility: visible;
	}

	.mobile-nav {
		display: flex;
		flex-direction: column;
		gap: var(--spacing-xl);
		padding: var(--spacing-4xl);
		transform: translateY(30px);
		transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
	}

	.mobile-menu-overlay.active .mobile-nav {
		transform: translateY(0);
	}

	.mobile-nav-item {
		display: flex;
		align-items: center;
		gap: var(--spacing-lg);
		padding: var(--spacing-lg) var(--spacing-2xl);
		background: var(--color-bg-card);
		border: 1px solid var(--color-border);
		border-radius: var(--radius-lg);
		text-decoration: none;
		color: var(--color-text);
		transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
		backdrop-filter: blur(10px);
		min-width: 200px;
	}

	.mobile-nav-item:hover {
		background: var(--color-bg-card-hover);
		border-color: var(--color-primary-solid);
		transform: translateX(10px);
		box-shadow: var(--shadow-glow);
	}

	.mobile-nav-item.active {
		background: var(--gradient-primary);
		color: white;
	}

	.mobile-nav-icon {
		font-size: 1.5rem;
		filter: drop-shadow(0 0 4px rgba(139, 124, 246, 0.5));
	}

	.mobile-nav-text {
		font-size: 1.125rem;
		font-weight: 500;
		color: inherit;
	}

	@media (max-width: 768px) {
		.mobile-menu-container {
			display: block;
		}
	}

	@media (max-width: 480px) {
		.mobile-nav-item {
			min-width: 180px;
			padding: var(--spacing-md) var(--spacing-lg);
		}

		.mobile-nav-text {
			font-size: 1rem;
		}
	}
</style>

<script>
	document.addEventListener('DOMContentLoaded', () => {
		const hamburgerBtn = document.querySelector('.hamburger-btn');
		const mobileMenuOverlay = document.querySelector('.mobile-menu-overlay');
		const mobileNavItems = document.querySelectorAll('.mobile-nav-item');
		const body = document.body;
		
		let isMenuOpen = false;

		function toggleMenu() {
			isMenuOpen = !isMenuOpen;
			hamburgerBtn?.classList.toggle('active', isMenuOpen);
			mobileMenuOverlay?.classList.toggle('active', isMenuOpen);
			body.style.overflow = isMenuOpen ? 'hidden' : '';
		}

		hamburgerBtn?.addEventListener('click', toggleMenu);

		mobileMenuOverlay?.addEventListener('click', (e) => {
			if (e.target === mobileMenuOverlay) {
				toggleMenu();
			}
		});

		mobileNavItems.forEach(item => {
			item.addEventListener('click', () => {
				toggleMenu();
			});
		});

		document.addEventListener('keydown', (e) => {
			if (e.key === 'Escape' && isMenuOpen) {
				toggleMenu();
			}
		});
	});
</script>